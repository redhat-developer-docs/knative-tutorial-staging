<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Knative Tutorial(Staging)</title>
    <link rel="canonical" href="http://redhat-developer-docs.github.io/knative-tutorial-staging/knative-tutorial-eventing/channel-and-subscribers.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="http://redhat-developer-docs.github.io/knative-tutorial-staging">Knative Tutorial(Staging)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="knative-tutorial-eventing" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="eventing.html#eventing-prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="eventing-src-to-sink.html">Source to Sink</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-source">Event Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-create-event-source">Create Event Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-verify-event-source">Verify</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-sink-service">Sink Service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-gen-sink-service">Generate Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-deploy-sink-service">Deploy Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-see-what-you-have-deployed">See What You Have Deployed</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-src-to-sink.html#eventing-cleanup">Cleanup</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="channel-and-subscribers.html">Channel and Subscribers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#eventing-channel">Channel</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-create-event-channel">Create Event Channel</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-verify-event-channel">Verify</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#eventing-source">Event Source</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-create-event-source">Create Event Source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-verify-event-source">Verify</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#eventing-subscriber">Event Subscriber</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-create-subscriber">Create Event Subscriber</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-verify-subscriber">Verify</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#eventing-see-what-you-have-deployed">See What You Have Deployed</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#eventing-cleanup">Cleanup</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="eventing-trigger-broker.html">Brokers and Triggers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#events-triggers-brokers">Events, Triggers and Brokers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#broker">Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#eventing-service">Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#eventing-event-source">Event Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#eventing-trigger">Trigger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#eventing-trigger-verification">Verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventing-trigger-broker.html#eventing-cleanup">Cleanup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="eventing.html#eventing-watch-logs">Watching Logs</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../knative-tutorial/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Knative Eventing</a></li>
    <li><a href="channel-and-subscribers.html">Channel and Subscribers</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-developer-demos/knative-tutorial-module-eventing/edit/master/modules/ROOT/pages/channel-and-subscribers.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="channels-and-subs"><a class="anchor" href="#channels-and-subs"></a>Channel and Subscribers</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Channels</dt>
<dd>
<p>Channels are an event forwarding and persistence layer where each channel is a separate Kubernetes Custom Resource.  A Channel may be backed by Apache Kafka or InMemoryChannel.  This recipe focuses on InMemoryChannel.</p>
</dd>
<dt class="hdlist1">Subscriptions</dt>
<dd>
<p>Subscriptions are how you register your service to listen to a particular channel.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eventing-channel"><a class="anchor" href="#eventing-channel"></a>Channel(Sink)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://en.wikipedia.org/wiki/Event-driven_architecture#Event_channel">channel or sink</a> is an interface between the <a href="#eventing-source">event source</a> and the <a href="#eventing-subscriber">subscriber</a>. The channels are built in to store the incoming events and distribute the event data to the subscribers. When forwarding event to subscribers the channel transforms the event data as per <a href="http://cloudevents.io">CloudEvent</a> specification.</p>
</div>
<div class="sect2">
<h3 id="eventing-create-event-channel"><a class="anchor" href="#eventing-create-event-channel"></a>Create Event Channel</h3>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/channel.yaml">channel.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: messaging.knative.dev/v1alpha1
kind: Channel
metadata:
  name: eventinghello-ch <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the channel. Knative makes it addressable, i.e. resolveable to a target (a consumer service)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the following commands to create the channel:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset1_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_kubectl">
<div id="eventing-run-source-sub-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/channel.yaml">channel.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-source-sub-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_oc">
<div id="eventing-run-source-sub-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/channel.yaml">channel.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-source-sub-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="eventing-verify-event-channel"><a class="anchor" href="#eventing-verify-event-channel"></a>Verification</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset2_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_kubectl">
<div id="eventing-run-verify-event-channel" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n knativetutorial get channels.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-verify-event-channel[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_oc">
<div id="eventing-run-oc-verify-event-channel" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n knativetutorial get channels.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-oc-verify-event-channel[]</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Running  the above command should return the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME             READY URL
eventinghello-ch True  <a href="http://eventinghello-ch-kn-channel.knativetutorial.svc.cluster.local" class="bare">http://eventinghello-ch-kn-channel.knativetutorial.svc.cluster.local</a></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eventing-source"><a class="anchor" href="#eventing-source"></a>Event Source</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The event source listens to external events e.g. a kafka topic or for a file on a FTP server. It is responsible to drain the received event(s) along with its data to a configured <a href="https://en.wikipedia.org/wiki/Sink_(computing)">sink</a>.</p>
</div>
<div class="sect2">
<h3 id="eventing-create-event-source"><a class="anchor" href="#eventing-create-event-source"></a>Create Event Source</h3>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/event-source.yaml">event-source.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: sources.eventing.knative.dev/v1alpha1
kind: CronJobSource
metadata:
  name: my-cjs
spec:
  schedule: "*/2 * * * *"
  data: '{"message": "From CronJob Source"}'
  sink:
   ref:
    apiVersion: messaging.knative.dev/v1alpha1 <i class="conum" data-value="1"></i><b>(1)</b>
    kind: Channel <i class="conum" data-value="2"></i><b>(2)</b>
    name: eventinghello-ch</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The Channel API is in api-group <code>messaging.eventing.knative.dev</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Kind is <code>Channel</code> instead of direct to a specific service; default is InMemoryChannel implementation</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the following commands to create the event source resources:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset3_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_kubectl">
<div id="eventing-run-apply-event-src-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/event-source.yaml">event-source.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-apply-event-src-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_oc">
<div id="eventing-run-apply-event-src-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/event-source.yaml">event-source.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-apply-event-src-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="eventing-verify-event-source"><a class="anchor" href="#eventing-verify-event-source"></a>Verification</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset4_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_kubectl">
<div id="eventing-run-verify-event-src" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n knativetutorial get cronjobsources.sources.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-verify-event-src[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_oc">
<div id="eventing-run-oc-verify-event-src" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n knativetutorial get cronjobsources.sources.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-oc-verify-event-src[]</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Running  the above command should return the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME     READY   AGE
my-cjs   True    8s</code></pre>
</div>
</div>
<div class="paragraph">
<p>The cronjob source also creates a service pod,</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset5_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset5_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset5_kubectl">
<div id="eventing-run-get-pods" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n knativetutorial get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-get-pods[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset5_oc">
<div id="eventing-run-oc-get-pods" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n knativetutorial get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-oc-get-pods[]</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The above command will return an output like,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                                                          READY     STATUS    RESTARTS   AGE
cronjob-event-greeter-cronjob-source-4v9vq-6bff96b58f-tgrhj   2/2       Running   0          6m</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eventing-subscriber"><a class="anchor" href="#eventing-subscriber"></a>Event Subscriber</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The event subscription is responsible of connecting the channel(sink) with the service. Once a service connected to a channel it starts receiving the events (cloud events).</p>
</div>
<div class="sect2">
<h3 id="eventing-create-subscribers-services"><a class="anchor" href="#eventing-create-subscribers-services"></a>Create Subscriber Services</h3>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/channel-subscriber.yaml">channel-subscriber.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: eventinghelloa
spec:
  template:
    metadata:
      name: eventinghelloa-v1 <i class="conum" data-value="1"></i><b>(1)</b>
      annotations:
        autoscaling.knative.dev/target: "1"
    spec:
      containers:
      - image: quay.io/rhdevelopers/eventinghello:0.0.1</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The string of <code>eventinghelloa</code> will help you identify this particular service.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: eventinghellob
spec:
  template:
    metadata:
      name: eventinghellob-v1 <i class="conum" data-value="1"></i><b>(1)</b>
      annotations:
        autoscaling.knative.dev/target: "1"
    spec:
      containers:
      - image: quay.io/rhdevelopers/eventinghello:0.0.1</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The string of <code>eventinghellob</code> will help you identify this particular service.</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset6_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset6_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset6_kubectl">
<div id="create-subscriber-svc-1-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-helloa-sink.yaml">eventing-helloa-sink.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-svc-1-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset6_oc">
<div id="create-subscriber-svc-1-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-helloa-sink.yaml">eventing-helloa-sink.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-svc-1-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset7_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset7_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset7_kubectl">
<div id="create-subscriber-svc-2-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-hellob-sink.yaml">eventing-hellob-sink.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-svc-2-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset7_oc">
<div id="create-subscriber-svc-2-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-hellob-sink.yaml">eventing-hellob-sink.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-svc-2-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventing-create-subscriber"><a class="anchor" href="#eventing-create-subscriber"></a>Create Channel Subscribers</h3>
<div class="paragraph">
<p>Now create the appropriate <code>Subscription</code> for <code>eventinghelloa</code> to the Channel <code>eventinghello-ch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: messaging.knative.dev/v1alpha1
kind: Subscription
metadata:
  name: eventinghelloa-sub
spec:
  channel:
    apiVersion: messaging.knative.dev/v1alpha1
    kind: Channel
    name: eventinghello-ch
  subscriber:
    ref:
      apiVersion: serving.knative.dev/v1
      kind: Service
      name: eventinghelloa</code></pre>
</div>
</div>
<div class="paragraph">
<p>And create the appropriate <code>Subscription</code> for <code>eventinghellob</code> to the Channel <code>eventinghello-ch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: messaging.knative.dev/v1alpha1
kind: Subscription
metadata:
  name: eventinghellob-sub
spec:
  channel:
    apiVersion: messaging.knative.dev/v1alpha1
    kind: Channel
    name: eventinghello-ch
  subscriber:
    ref:
      apiVersion: serving.knative.dev/v1
      kind: Service
      name: eventinghellob</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset8_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset8_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset8_kubectl">
<div id="create-subscriber-1-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-helloa-sub.yaml">eventing-helloa-sub.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-1-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset8_oc">
<div id="create-subscriber-1-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-helloa-sub.yaml">eventing-helloa-sub.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-1-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset9_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset9_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset9_kubectl">
<div id="create-subscriber-2-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-hellob-sub.yaml">eventing-hellob-sub.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-2-kn-resources-apply[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset9_oc">
<div id="create-subscriber-2-oc-kn-resources-apply" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -n knativetutorial -f <a href="https://github.com/redhat-developer-demos/knative-tutorial/blob/master/eventing/eventing-hellob-sub.yaml">eventing-hellob-sub.yaml</a></code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::create-subscriber-2-oc-kn-resources-apply[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="eventing-verify-subscriber"><a class="anchor" href="#eventing-verify-subscriber"></a>Verification</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset10_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset10_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset10_kubectl">
<div id="eventing-run-verify-subscriber" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n knativetutorial get subscriptions.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-verify-subscriber[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset10_oc">
<div id="eventing-run-oc-verify-subscriber" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n knativetutorial get subscriptions.eventing.knative.dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-oc-verify-subscriber[]</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Running  the above command should return the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                       AGE
event-greeter-subscriber  39s</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wait approximately 2 minutes for the CronJobSource then you will see both <code>eventinghelloa</code> and <code>eventinghellob</code> begin to run in the knativetutorial.</p>
</div>
<div class="listingblock">
<div class="title">Watch pods in the knativetutorial</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                                                      READY STATUS  AGE
cronjobsource-my-cjs-93544f14-2bf9-11ea-83c7-08002737670c 1/1   Running 2m15s
eventinghelloa-1-deployment-d86bf4847-hvbk6               2/2   Running 5s
eventinghellob-1-deployment-5c986c7586-4clpb              2/2   Running 5s</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventing-see-what-you-have-deployed"><a class="anchor" href="#eventing-see-what-you-have-deployed"></a>See what you have deployed</h3>
<div class="sect3">
<h4 id="_channel"><a class="anchor" href="#_channel"></a>channel</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset11_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset11_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset11_kubectl">
<div id="knative-event-channel" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl --namespace knativetutorial get channels.eventing.knative.dev ch-event-greeter</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::knative-event-channel[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset11_oc">
<div id="oc-knative-event-channel" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc --namespace knativetutorial get channels.eventing.knative.dev ch-event-greeter</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::oc-knative-event-channel[]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sources"><a class="anchor" href="#_sources"></a>sources</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset12_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset12_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset12_kubectl">
<div id="knative-event-sources" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl --namespace knativetutorial get cronjobsources.sources.eventing.knative.dev  event-greeter-cronjob-source</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::knative-event-sources[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset12_oc">
<div id="oc-knative-event-sources" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc --namespace knativetutorial get cronjobsources.sources.eventing.knative.dev event-greeter-cronjob-source</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::oc-knative-event-sources[]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_subscription"><a class="anchor" href="#_subscription"></a>subscription</h4>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset13_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset13_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset13_kubectl">
<div id="knative-event-subscribers" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl --namespace knativetutorial get subscriptions.eventing.knative.dev event-greeter-subscriber</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::knative-event-subscribers[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset13_oc">
<div id="oc-knative-event-subscribers" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc --namespace knativetutorial get subscriptions.eventing.knative.dev event-greeter-subscriber</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::oc-knative-event-subscribers[]</p>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Add <code>-oyaml</code> to the above commands to get more details about each object that were queried for.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eventing-cleanup"><a class="anchor" href="#eventing-cleanup"></a>Cleanup</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset14_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset14_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset14_kubectl">
<div id="eventing-run-cleanup2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n knativetutorial delete -f eventing-helloa-sink.yaml
kubectl -n knativetutorial delete -f eventing-helloa-sub.yaml
kubectl -n knativetutorial delete -f eventing-hellob-sink.yaml
kubectl -n knativetutorial delete -f eventing-hellob-sub.yaml
kubectl -n knativetutorial delete -f eventinghello-source-ch.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-cleanup2[]</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset14_oc">
<div id="eventing-run-oc-cleanup2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n knativetutorial delete -f eventing-helloa-sink.yaml
oc -n knativetutorial delete -f eventing-helloa-sub.yaml
oc -n knativetutorial delete -f eventing-hellob-sink.yaml
oc -n knativetutorial delete -f eventing-hellob-sub.yaml
oc -n knativetutorial delete -f eventinghello-source-ch.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>copyToClipboard::eventing-run-oc-cleanup2[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
